---
 - name: task1
   hosts: client
   become: yes
   user: admin
   tasks:
           - name : create a 800 mib partiton
             parted:
                device: /dev/sdb
                number: 1
                state: present
                part_start: 1MiB
                part_end: 801MiB

           - name: format filesystem
             filesystem:
                fstype: ext4
                dev: /dev/sdb1    
    
           - name: create mounting directory
             file:
                name: /special
                state: directory

           - name: mounting this
             mount:
                path: /special
                src: /dev/sdb1
                fstype: ext4
                state: mounted

           - name: 500 mb partition
             parted:
                device: /dev/sdb
                number: 2
                state: present
                part_start: 802MiB
                part_end: 1826MiB 
 
           - name: swap by cmd
             command: "{{ item }}"
             loop:
                - mkswap /dev/sdb2
                - swapon /dev/sdb2
             become_user: root


